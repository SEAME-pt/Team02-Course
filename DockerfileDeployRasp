FROM raspcrosscompile:latest

# Update the repoPath according to yours
ARG projectDir
ARG repoPath

RUN rm -rf $repoPath$projectDir

RUN mkdir -p $repoPath$projectDir

COPY $projectDir $repoPath$projectDir

RUN cd $repoPath$projectDir && \
    /build/qt6/pi/bin/qt-cmake . \
    -DCMAKE_BUILD_TYPE=Debug \
    -DZENOHCXX_ZENOHC=ON && \
    cmake --build .